cscope 15 $HOME/gbs/git_spin/e-mod-tizen-qpmgr/src               0000019611
	@e_mod_indicator.c

1 
	~"e_mod_maš.h
"

3 
_PÞ_IndiÿtÜ
 
	tPÞ_IndiÿtÜ
;

5 
	s_PÞ_IndiÿtÜ


7 
E_Cl›Á
 *
	mec
;

9 
Eša_BoÞ
 
	mþicked
 : 1;

10 
Eša_BoÞ
 
	m¡©e
: 1;

13 
Eša_Li¡
 *
	gšdiÿtÜ_hªdËrs
 = 
NULL
;

14 
Eša_Li¡
 *
	gšdiÿtÜ_hooks
 = 
NULL
;

15 
Eša_Hash
 *
	ghash_pÞ_šdiÿtÜs
 = 
NULL
;

18 
Evas_Objeù
 *
	gquick·Ãl
 = 
NULL
;

19 
Evas_Objeù
 *
	gquick·Ãl_þ³r
 = 
NULL
;

20 
	gquick·Ãl_x
 = 0;

21 
	gquick·Ãl_y
 = 0;

24 
	$_pÞ_cb_þ›Ás_d©a_ä“
(*
d©a
)

26 
	`ä“
(
d©a
);

27 
	}
}

30 
	$_šdiÿtÜ_evas_cb_mou£_move
(*
d©a
, 
Evas
 *
evas
 
EINA_UNUSED
, 
Evas_Objeù
 *
obj
 EINA_UNUSED, *
ev’t
)

32 
E_Cl›Á
 *
ec
;

33 
Evas_Ev’t_Mou£_Move
 *
ev
;

34 
Eša_Li¡
 *
l
;

35 
PÞ_IndiÿtÜ
 *
pi
;

37 
ev
 = 
ev’t
;

39 ià(!
quick·Ãl
) ;

41 ià(!(
ec
 = 
d©a
)) ;

43 ià(
	`e_objeù_is_d–
(
	`E_OBJECT
(
ec
))) ;

44 ià(
	`e_þ›Á_utž_ignÜed_g‘
(
ec
)) ;

46 
pi
 = 
	`eša_hash_fšd
(
hash_pÞ_šdiÿtÜs
, &
ec
);

47 ià((!
pi
è|| (!pi->
þicked
)) ;

49 
	`e_mod_move_quick·Ãl_objeù_hªdËr_move
(
quick·Ãl
, 0, 
ev
->
cur
.
ÿnvas
.
y
);

50 
	}
}

53 
	$_šdiÿtÜ_evas_cb_mou£_down
(*
d©a
, 
Evas
 *
evas
 
EINA_UNUSED
, 
Evas_Objeù
 *
obj
 EINA_UNUSED, *
ev’t
)

55 
E_Cl›Á
 *
ec
 = 
d©a
;

56 
Evas_Ev’t_Mou£_Down
 *
ev
 = 
ev’t
;

58 
PÞ_IndiÿtÜ
 *
pi
;

59 
E_Cl›Á
 *
qp_ec
 = 
NULL
;

61 
pi
 = 
	`eša_hash_fšd
(
hash_pÞ_šdiÿtÜs
, &
ec
);

62 ià(!
pi
) ;

66 ià(!
	`E_INSIDE
(
ev
->
ÿnvas
.
x
 - 
ec
->
þ›Á
.x ,ƒv->ÿnvas.
y
 -ƒc->þ›Á.y, 0, 0,ƒc->
w
, 100)) ;

69 
qp_ec
 = 
	`e_mod_move_quick·Ãl_þ›Á_fšd
();

70 ià(!
qp_ec
) ;

72 
pi
->
þicked
 = 
EINA_TRUE
;

74 
quick·Ãl
 = 
	`e_mod_move_quick·Ãl_objeù_add
(
qp_ec
);

75 
	`evas_objeù_move
(
quick·Ãl
, 0, 0);

76 
	`evas_objeù_»size
(
quick·Ãl
, 
qp_ec
->
w
, qp_ec->
h
);

77 
	`evas_objeù_show
(
quick·Ãl
);

78 
	`e_mod_move_quick·Ãl_objeù_hªdËr_move
(
quick·Ãl
, 0, 
ev
->
ÿnvas
.
y
 - 
ec
->y);

79 
	}
}

82 
	$_šdiÿtÜ_evas_cb_mou£_up
(*
d©a
, 
Evas
 *
evas
 
EINA_UNUSED
, 
Evas_Objeù
 *
obj
 EINA_UNUSED, *
ev’t
)

84 
E_Cl›Á
 *
ec
 = 
d©a
;

85 
Evas_Ev’t_Mou£_Up
 *
ev
 = 
ev’t
;

88 
PÞ_IndiÿtÜ
 *
pi
;

89 
E_Cl›Á
 *
qp_ec
 = 
NULL
;

91 
pi
 = 
	`eša_hash_fšd
(
hash_pÞ_šdiÿtÜs
, &
ec
);

92 ià((!
pi
è|| (!pi->
þicked
)) ;

94 
qp_ec
 = 
	`e_mod_move_quick·Ãl_þ›Á_fšd
();

96 
pi
->
þicked
 = 
EINA_FALSE
;

98 ià(
ev
->
ÿnvas
.
y
 > 
ec
->
zÚe
->
h
 / 2)

99 
	`evas_objeù_move
(
qp_ec
->
äame
, 0, 0);

101 
	`evas_objeù_move
(
qp_ec
->
äame
, -10000, -10000);

103 
	`evas_objeù_hide
(
quick·Ãl
);

104 
	`evas_objeù_d–
(
quick·Ãl
);

105 
quick·Ãl
 = 
NULL
;

107 
	}
}

110 
	$_šdiÿtÜ_þ›Á_evas_š™
(
E_Cl›Á
 *
ec
)

112 
PÞ_IndiÿtÜ
 *
pi
;

114 ià(
	`eša_hash_fšd
(
hash_pÞ_šdiÿtÜs
, &
ec
)) ;

117 
	`evas_objeù_ev’t_ÿÎback_add
(
ec
->
äame
, 
EVAS_CALLBACK_MOUSE_MOVE
,

118 
_šdiÿtÜ_evas_cb_mou£_move
, 
ec
);

119 
	`evas_objeù_ev’t_ÿÎback_add
(
ec
->
äame
, 
EVAS_CALLBACK_MOUSE_DOWN
,

120 
_šdiÿtÜ_evas_cb_mou£_down
, 
ec
);

121 
	`evas_objeù_ev’t_ÿÎback_add
(
ec
->
äame
, 
EVAS_CALLBACK_MOUSE_UP
,

122 
_šdiÿtÜ_evas_cb_mou£_up
, 
ec
);

124 
pi
 = 
	`E_NEW
(
PÞ_IndiÿtÜ
, 1);

125 
pi
->
ec
 =ƒc;

127 
	`eša_hash_add
(
hash_pÞ_šdiÿtÜs
, &
ec
, 
pi
);

128 
	}
}

130 
Eša_BoÞ


131 
	$_šdiÿtÜ_cb_comp_objeù_add
(*
d©a
 
EINA_UNUSED
, 
ty³
 EINA_UNUSED, 
E_Ev’t_Comp_Objeù
 *
ev
)

133 
E_Cl›Á
 *
ec
;

136 ià(!(
ec
 = 
	`e_comp_objeù_þ›Á_g‘
(
ev
->
comp_objeù
)))

137  
ECORE_CALLBACK_RENEW
;

140 ià(
	`e_objeù_is_d–
(
	`E_OBJECT
(
ec
))è 
ECORE_CALLBACK_RENEW
;

143 ià(
	`e_pixm­_ty³_g‘
(
ec
->
pixm­
è!ð
E_PIXMAP_TYPE_WL
è 
ECORE_CALLBACK_RENEW
;

145 ià(!
	`e_utž_¡rcmp
(
ec
->
icccm
.
t™Ë
, "QUICKPANEL")è 
ECORE_CALLBACK_RENEW
;

148 ià(
	`eša_hash_fšd
(
hash_pÞ_šdiÿtÜs
, &
ev
->
comp_objeù
)è 
ECORE_CALLBACK_RENEW
;

150 
	`_šdiÿtÜ_þ›Á_evas_š™
(
ec
);

152 
	`´štf
("[E19] COMP_OBJECT_ADD:ƒøt™Ë: %s\n", 
ec
->
icccm
.
t™Ë
);

154  
ECORE_CALLBACK_RENEW
;

155 
	}
}

158 
	$_šdiÿtÜ_hook_þ›Á_d–
(*
d
 
EINA_UNUSED
, 
E_Cl›Á
 *
ec
)

160 ià(!
ec
) ;

161 ià(
	`eša_hash_fšd
(
hash_pÞ_šdiÿtÜs
, &
ec
))

162 
	`eša_hash_d–_by_key
(
hash_pÞ_šdiÿtÜs
, &
ec
);

163 
	}
}

165 #undeà
E_CLIENT_HOOK_APPEND


166 
	#E_CLIENT_HOOK_APPEND
(
l
, 
t
, 
cb
, 
d
) \

169 
E_Cl›Á_Hook
 *
_h
; \

170 
_h
 = 
	`e_þ›Á_hook_add
(
t
, 
cb
, 
d
); \

171 
	`as£¹
(
_h
); \

172 
l
 = 
	`eša_li¡_­³nd
Ö, 
_h
); \

174 0)

	)

176 
EINTERN
 

177 
	$e_mod_pÞ_šdiÿtÜ_š™
()

179 
hash_pÞ_šdiÿtÜs
 = 
	`eša_hash_poš‹r_Ãw
(
_pÞ_cb_þ›Ás_d©a_ä“
);

181 
	`E_LIST_HANDLER_APPEND
(
šdiÿtÜ_hªdËrs
, 
E_EVENT_COMP_OBJECT_ADD
,

182 
_šdiÿtÜ_cb_comp_objeù_add
, 
NULL
);

183 
	`E_CLIENT_HOOK_APPEND
(
šdiÿtÜ_hooks
, 
E_CLIENT_HOOK_DEL
,

184 
_šdiÿtÜ_hook_þ›Á_d–
, 
NULL
);

185 
	}
}

187 
EINTERN
 

188 
	$e_mod_pÞ_šdiÿtÜ_shutdown
()

190 
	`E_FREE_LIST
(
šdiÿtÜ_hooks
, 
e_þ›Á_hook_d–
);

191 
	`E_FREE_LIST
(
šdiÿtÜ_hªdËrs
, 
ecÜe_ev’t_hªdËr_d–
);

192 
	`E_FREE_FUNC
(
hash_pÞ_šdiÿtÜs
, 
eša_hash_ä“
);

193 
	}
}

	@e_mod_main.c

1 
	~"e_mod_maš.h
"

3 
EAPI
 
E_ModuË_Api
 
	ge_mod­i
 = { 
E_MODULE_API_VERSION
, "Quickpanel-Manager" };

5 
EAPI
 *

6 
	$e_mod­i_š™
(
E_ModuË
 *
m
)

8 
	`´štf
("LOAD % MODULE\n", 
e_mod­i
.
Çme
);

11 
	`e_mod_pÞ_šdiÿtÜ_š™
();

12 
	`e_mod_qpmgr_quick·Ãl_š™
();

15  
m
;

16 
	}
}

18 
EAPI
 

19 
	$e_mod­i_shutdown
(
E_ModuË
 *
m
 
EINA_UNUSED
)

22 
	`e_mod_pÞ_šdiÿtÜ_shutdown
();

23 
	`e_mod_qpmgr_quick·Ãl_shutdown
();

27 
	}
}

29 
EAPI
 

30 
	$e_mod­i_§ve
(
E_ModuË
 *
m
 
EINA_UNUSED
)

34 
	}
}

	@e_mod_main.h

1 #iâdeà
E_MOD_MAIN_H


2 
	#E_MOD_MAIN_H


	)

4 
	~<e.h
>

7 
EAPI
 
E_ModuË_Api
 
e_mod­i
;

9 
EAPI
 *
e_mod­i_š™
 (
E_ModuË
 *
m
);

10 
EAPI
 
e_mod­i_shutdown
 (
E_ModuË
 *
m
);

11 
EAPI
 
e_mod­i_§ve
 (
E_ModuË
 *
m
);

14 
EINTERN
 
e_mod_pÞ_šdiÿtÜ_š™
();

15 
EINTERN
 
e_mod_pÞ_šdiÿtÜ_shutdown
();

16 
EINTERN
 
e_mod_qpmgr_quick·Ãl_š™
();

17 
EINTERN
 
e_mod_qpmgr_quick·Ãl_shutdown
();

18 
EINTERN
 
Evas_Objeù
 *
e_mod_move_quick·Ãl_objeù_add
(
E_Cl›Á
 *
ec
);

19 
EINTERN
 
Eša_BoÞ
 
e_mod_move_quick·Ãl_objeù_hªdËr_move
(
Evas_Objeù
 *
obj
, 
x
, 
y
);

20 
EINTERN
 
E_Cl›Á
 *
e_mod_move_quick·Ãl_þ›Á_fšd
();

	@e_mod_quickpanel.c

1 
	~"e_mod_maš.h
"

3 
	#SMART_NAME
 "quick·Ãl_objeù"

	)

5 
	#API_ENTRY
 
Quick·Ãl_D©a
 *
qp_d©a
; \

6 
qp_d©a
 = 
	`evas_objeù_sm¬t_d©a_g‘
(
obj
); \

7 ià((!
obj
è|| (!
qp_d©a
è|| (
	`e_utž_¡rcmp
(
	`evas_objeù_ty³_g‘
(obj), 
SMART_NAME
))è

	)

10 
	#SOFT_ENTRY
(...è
Quick·Ãl_D©a
 *
qp_d©a
; \

11 ià(!
obj
) \

13 
	`CRI
("YOU PASSED NULL!"); \

14  
__VA_ARGS__
; \

16 
qp_d©a
 = 
	`evas_objeù_sm¬t_d©a_g‘
(
obj
); \

17 ià((!
qp_d©a
è|| (
	`e_utž_¡rcmp
(
	`evas_objeù_ty³_g‘
(
obj
), 
SMART_NAME
))) \

18 
qp_d©a
 = 
NULL


	)

20 
	#INTERNAL_ENTRY
 
Quick·Ãl_D©a
 *
qp_d©a
; qp_d©¨ð
	`evas_objeù_sm¬t_d©a_g‘
(
obj
);

	)

23 
_PÞ_Quick·Ãl
 
	tPÞ_Quick·Ãl
;

25 
	s_PÞ_Quick·Ãl


27 
E_Cl›Á
 *
	mec
;

28 
Eša_BoÞ
 
	mþicked
 : 1;

32 
	mx
;

33 
	my
;

34 
	mw
;

35 
	mh
;

36 } 
	mhªdËr_geo
;

39 
PÞ_Quick·Ãl
 *
	g_pÞ_quick·Ãl
 = 
NULL
;

41 
Eša_Li¡
 *
	gquick·Ãl_hªdËrs
 = 
NULL
;

42 
Eša_Li¡
 *
	gquick·Ãl_hooks
 = 
NULL
;

45 
Evas_Objeù
 *
	gquick·Ãl
 = 
NULL
;

50 
	s_Quick·Ãl_D©a


52 
	mEINA_INLIST
;

53 
E_Cl›Á
 *
	mec
;

55 
Evas_Objeù
 *
	msm¬t_obj
;

56 
Evas_Objeù
 *
	mqp_Ïyout_obj
;

57 
Evas_Objeù
 *
	mba£_mœrÜ_obj
;

58 
Evas_Objeù
 *
	mhªdËr_mœrÜ_obj
;

59 
Evas_Objeù
 *
	mba£_þ
;

60 
Evas_Objeù
 *
	mhªdËr_þ
;

62 
Eša_BoÞ
 
	mqp_Ïyout_š™
: 1;

66 
	mx
;

67 
	my
;

68 
	mw
;

69 
	mh
;

70 } 
	mhªdËr_geo
;

72 
	mªgË
;

76 
Eša_BoÞ
 
	mªim©šg
 : 1;

77 
	msx
;

78 
	msy
;

79 
	mex
;

80 
	mey
;

81 
	mdx
;

82 
	mdy
;

83 
EcÜe_Anim©Ü
 *
	mªim
;

84 } 
	mªim©iÚ_šfo
;

85 } 
	tQuick·Ãl_D©a
;

87 
Evas_Sm¬t
 *
	g_quick·Ãl_sm¬t
 = 
NULL
;

90 
	$_quick·Ãl_š‹rû±_show
(*
d©a
, 
Evas_Objeù
 *
obj
 
EINA_UNUSED
)

92 
Quick·Ãl_D©a
 *
qp_d©a
 = 
d©a
;

93 
E_Cl›Á
 *
ec
 = 
qp_d©a
->ec;

95 ià(
qp_d©a
->
qp_Ïyout_š™
)

97 
	`evas_objeù_show
(
qp_d©a
->
sm¬t_obj
);

102 
	`evas_objeù_cÞÜ_£t
(
qp_d©a
->
ec
->
äame
, 0, 0, 0, 0);

104 
qp_d©a
->
ba£_mœrÜ_obj
 = 
	`e_comp_objeù_utž_mœrÜ_add
(
ec
->
äame
);

105 
	`e_Ïyout_·ck
(
qp_d©a
->
qp_Ïyout_obj
, qp_d©a->
ba£_mœrÜ_obj
);

106 
	`e_Ïyout_chžd_move
(
qp_d©a
->
ba£_mœrÜ_obj
, 0, 0);

107 
	`e_Ïyout_chžd_»size
(
qp_d©a
->
ba£_mœrÜ_obj
, 
ec
->
w
,ƒc->
h
);

108 
	`evas_objeù_show
(
qp_d©a
->
ba£_mœrÜ_obj
);

110 
qp_d©a
->
ba£_þ
 = 
	`evas_objeù_»ùªgË_add
(
e_comp
->
evas
);

111 
	`e_Ïyout_·ck
(
qp_d©a
->
qp_Ïyout_obj
, qp_d©a->
ba£_þ
);

112 
	`e_Ïyout_chžd_move
(
qp_d©a
->
ba£_þ
, 0, 0);

113 
	`e_Ïyout_chžd_»size
(
qp_d©a
->
ba£_þ
, 
ec
->
w
,ƒc->
h
);

114 
	`evas_objeù_cÞÜ_£t
(
qp_d©a
->
ba£_þ
, 255, 255, 255, 255);

115 
	`evas_objeù_show
(
qp_d©a
->
ba£_þ
);

117 
	`evas_objeù_þ_£t
(
qp_d©a
->
ba£_mœrÜ_obj
, qp_d©a->
ba£_þ
);

121 
qp_d©a
->
hªdËr_mœrÜ_obj
 = 
	`e_comp_objeù_utž_mœrÜ_add
(
ec
->
äame
);

122 
	`e_Ïyout_·ck
(
qp_d©a
->
qp_Ïyout_obj
, qp_d©a->
hªdËr_mœrÜ_obj
);

123 
	`e_Ïyout_chžd_move
(
qp_d©a
->
hªdËr_mœrÜ_obj
, qp_d©a->
hªdËr_geo
.
x
, qp_d©a->hªdËr_geo.
y
);

124 
	`e_Ïyout_chžd_»size
(
qp_d©a
->
hªdËr_mœrÜ_obj
, 
ec
->
w
,ƒc->
h
);

125 
	`evas_objeù_show
(
qp_d©a
->
hªdËr_mœrÜ_obj
);

127 
qp_d©a
->
hªdËr_þ
 = 
	`evas_objeù_»ùªgË_add
(
e_comp
->
evas
);

128 
	`e_Ïyout_·ck
(
qp_d©a
->
qp_Ïyout_obj
, qp_d©a->
hªdËr_þ
);

129 
	`e_Ïyout_·ck
(
qp_d©a
->
qp_Ïyout_obj
, qp_d©a->
hªdËr_þ
);

130 
	`e_Ïyout_chžd_move
(
qp_d©a
->
hªdËr_þ
, qp_d©a->
hªdËr_geo
.
x
, qp_d©a->hªdËr_geo.
y
);

131 
	`e_Ïyout_chžd_»size
(
qp_d©a
->
hªdËr_þ
, qp_d©a->
hªdËr_geo
.
w
, qp_d©a->hªdËr_geo.
h
);

132 
	`evas_objeù_cÞÜ_£t
(
qp_d©a
->
hªdËr_þ
, 255, 255, 255, 255);

133 
	`evas_objeù_show
(
qp_d©a
->
hªdËr_þ
);

135 
	`evas_objeù_þ_£t
(
qp_d©a
->
hªdËr_mœrÜ_obj
, qp_d©a->
hªdËr_þ
);

137 
qp_d©a
->
qp_Ïyout_š™
 = 
EINA_TRUE
;

140 
	`evas_objeù_show
(
qp_d©a
->
sm¬t_obj
);

141 
	}
}

144 
	$_quick·Ãl_sm¬t_add
(
Evas_Objeù
 *
obj
)

146 
Quick·Ãl_D©a
 *
qp_d©a
;

147 
qp_d©a
 = 
	`E_NEW
(
Quick·Ãl_D©a
, 1);

148 
qp_d©a
->
sm¬t_obj
 = 
obj
;

149 
qp_d©a
->
qp_Ïyout_obj
 = 
	`e_Ïyout_add
(
e_comp
->
evas
);

150 
	`evas_objeù_cÞÜ_£t
(
qp_d©a
->
qp_Ïyout_obj
, 255, 255, 255, 255);

151 
	`evas_objeù_sm¬t_memb”_add
(
qp_d©a
->
qp_Ïyout_obj
, qp_d©a->
sm¬t_obj
);

154 
	`evas_objeù_Ïy”_£t
(
qp_d©a
->
sm¬t_obj
, 
EVAS_LAYER_MAX
 - 1);

162 
	`evas_objeù_sm¬t_d©a_£t
(
obj
, 
qp_d©a
);

164 
	`evas_objeù_d©a_£t
(
obj
, "qp_obj", 
qp_d©a
);

165 
	`evas_objeù_move
(
obj
, -1 , -1);

168 
	`evas_objeù_š‹rû±_show_ÿÎback_add
(
obj
, 
_quick·Ãl_š‹rû±_show
, 
qp_d©a
);

170 
	}
}

173 
	$_quick·Ãl_sm¬t_d–
(
Evas_Objeù
 *
obj
)

175 
E_Cl›Á
 *
ec
;

177 
INTERNAL_ENTRY
;

179 
ec
 = 
qp_d©a
->ec;

180 
qp_d©a
->
ªim©iÚ_šfo
.
ªim©šg
 = 0;

181 ià(
qp_d©a
->
ba£_þ
)

183 
	`evas_objeù_þ_un£t
(
qp_d©a
->
ba£_þ
);

184 
	`e_Ïyout_uÅack
(
qp_d©a
->
ba£_þ
);

185 
	`evas_objeù_d–
(
qp_d©a
->
ba£_þ
);

187 ià(
qp_d©a
->
hªdËr_þ
)

189 
	`evas_objeù_þ_un£t
(
qp_d©a
->
hªdËr_þ
);

190 
	`e_Ïyout_uÅack
(
qp_d©a
->
hªdËr_þ
);

191 
	`evas_objeù_d–
(
qp_d©a
->
hªdËr_þ
);

193 ià(
qp_d©a
->
ba£_mœrÜ_obj
)

195 
	`e_Ïyout_uÅack
(
qp_d©a
->
ba£_mœrÜ_obj
);

196 
	`evas_objeù_d–
(
qp_d©a
->
ba£_mœrÜ_obj
);

198 ià(
qp_d©a
->
hªdËr_mœrÜ_obj
)

200 
	`e_Ïyout_uÅack
(
qp_d©a
->
hªdËr_mœrÜ_obj
);

201 
	`evas_objeù_d–
(
qp_d©a
->
hªdËr_mœrÜ_obj
);

204 ià(
qp_d©a
->
qp_Ïyout_obj
è
	`evas_objeù_d–
(qp_data->qp_layout_obj);

206 
	`evas_objeù_cÞÜ_£t
(
ec
->
äame
,ƒc->
Ãtwm
.
Ýac™y
,ƒc->netwm.opacity,ƒc->netwm.opacity,ƒc->netwm.opacity);

208 
	`ä“
(
qp_d©a
);

209 
	}
}

212 
	$_quick·Ãl_sm¬t_show
(
Evas_Objeù
 *
obj
)

214 
INTERNAL_ENTRY
;

216 
	`evas_objeù_show
(
qp_d©a
->
qp_Ïyout_obj
);

218 
	`evas_objeù_show
(
qp_d©a
->
ba£_þ
);

219 
	`evas_objeù_show
(
qp_d©a
->
ba£_mœrÜ_obj
);

220 
	`evas_objeù_show
(
qp_d©a
->
hªdËr_þ
);

221 
	`evas_objeù_show
(
qp_d©a
->
hªdËr_mœrÜ_obj
);

223 
	}
}

226 
	$_quick·Ãl_sm¬t_hide
(
Evas_Objeù
 *
obj
)

228 
INTERNAL_ENTRY
;

230 
	`evas_objeù_hide
(
qp_d©a
->
qp_Ïyout_obj
);

232 
	`evas_objeù_hide
(
qp_d©a
->
ba£_þ
);

233 
	`evas_objeù_hide
(
qp_d©a
->
ba£_mœrÜ_obj
);

234 
	`evas_objeù_hide
(
qp_d©a
->
hªdËr_þ
);

235 
	`evas_objeù_hide
(
qp_d©a
->
hªdËr_mœrÜ_obj
);

237 
	}
}

240 
	$_quick·Ãl_sm¬t_move
(
Evas_Objeù
 *
obj
, 
x
, 
y
)

242 
INTERNAL_ENTRY
;

245 
	`evas_objeù_move
(
qp_d©a
->
qp_Ïyout_obj
, 
x
, 
y
);

247 
	`evas_objeù_move
(
qp_d©a
->
ba£_þ
, 
x
, 
y
);

248 
	`evas_objeù_move
(
qp_d©a
->
ba£_mœrÜ_obj
, 
x
, 
y
);

249 
	`evas_objeù_move
(
qp_d©a
->
hªdËr_þ
, 
x
, 
y
);

250 
	`evas_objeù_move
(
qp_d©a
->
hªdËr_mœrÜ_obj
, 
x
, 
y
);

252 
	}
}

255 
	$_quick·Ãl_sm¬t_»size
(
Evas_Objeù
 *
obj
, 
w
, 
h
)

257 
INTERNAL_ENTRY
;

259 
	`e_Ïyout_vœtu®_size_£t
(
qp_d©a
->
qp_Ïyout_obj
, 
w
, 
h
);

260 
	`evas_objeù_»size
(
qp_d©a
->
qp_Ïyout_obj
, 
w
, 
h
);

262 
	`evas_objeù_»size
(
qp_d©a
->
ba£_þ
, 
w
, 
h
);

263 
	`evas_objeù_»size
(
qp_d©a
->
ba£_mœrÜ_obj
, 
w
, 
h
);

264 
	`evas_objeù_»size
(
qp_d©a
->
hªdËr_þ
, 
w
, 
h
);

265 
	`evas_objeù_»size
(
qp_d©a
->
hªdËr_mœrÜ_obj
, 
w
, 
h
);

267 
	}
}

270 
	$_quick·Ãl_sm¬t_š™
()

272 ià(
_quick·Ãl_sm¬t
) ;

274 cÚ¡ 
Evas_Sm¬t_CÏss
 
sc
 =

276 
SMART_NAME
,

277 
EVAS_SMART_CLASS_VERSION
,

278 
_quick·Ãl_sm¬t_add
,

279 
_quick·Ãl_sm¬t_d–
,

280 
_quick·Ãl_sm¬t_move
,

281 
_quick·Ãl_sm¬t_»size
,

282 
_quick·Ãl_sm¬t_show
,

283 
_quick·Ãl_sm¬t_hide
,

284 
NULL
,

285 
NULL
,

286 
NULL
,

287 
NULL
,

288 
NULL
,

289 
NULL
,

291 
NULL
,

292 
NULL
,

293 
NULL
,

294 
NULL


296 
_quick·Ãl_sm¬t
 = 
	`evas_sm¬t_þass_Ãw
(&
sc
);

298 
	}
}

300 
EINTERN
 
Evas_Objeù
 *

301 
	$e_mod_move_quick·Ãl_objeù_add
(
E_Cl›Á
 *
ec
)

303 
Evas_Objeù
 *
o
;

304 
Quick·Ãl_D©a
 *
qp_d©a
;

306 
	`EINA_SAFETY_ON_NULL_RETURN_VAL
(
ec
, 
NULL
);

308 ià(!
ec
->
äame
è 
NULL
;

310 
	`_quick·Ãl_sm¬t_š™
();

311 
o
 = 
	`evas_objeù_sm¬t_add
(
e_comp
->
evas
, 
_quick·Ãl_sm¬t
);

313 
qp_d©a
 = 
	`evas_objeù_sm¬t_d©a_g‘
(
o
);

314 
	`evas_objeù_d©a_£t
(
o
, "E_Cl›Á", 
ec
);

315 
qp_d©a
->
ec
 =ƒc;

318 
qp_d©a
->
hªdËr_geo
.
w
 = 
ec
->w;

319 
qp_d©a
->
hªdËr_geo
.
h
 = 50;

325  
o
;

326 
	}
}

328 
EINTERN
 
Eša_BoÞ


329 
	$e_mod_move_quick·Ãl_objeù_hªdËr_move
(
Evas_Objeù
 *
obj
, 
x
, 
y
)

331 
Quick·Ãl_D©a
 *
qp_d©a
;

333 ià(!
	`evas_objeù_d©a_g‘
(
obj
, "qp_obj")è 
EINA_FALSE
;

335 
qp_d©a
 = 
	`evas_objeù_sm¬t_d©a_g‘
(
obj
);

339 
qp_d©a
->
hªdËr_geo
.
y
 = y ;

341 
	`e_Ïyout_chžd_»size
(
qp_d©a
->
ba£_þ
, qp_d©a->
ec
->
w
, qp_d©a->
hªdËr_geo
.
y
);

344 
	`e_Ïyout_chžd_move
(
qp_d©a
->
hªdËr_mœrÜ_obj
, qp_d©a->
hªdËr_geo
.
x
, qp_d©a->hªdËr_geo.
y
 - qp_d©a->
ec
->
h
 + qp_data->handler_geo.h);

345 
	`e_Ïyout_chžd_move
(
qp_d©a
->
hªdËr_þ
, qp_d©a->
hªdËr_geo
.
x
, qp_d©a->hªdËr_geo.
y
);

348  
EINA_TRUE
;

349 
	}
}

351 
EINTERN
 
E_Cl›Á
 *

352 
	$e_mod_move_quick·Ãl_þ›Á_fšd
()

354 
E_Cl›Á
 *
ec
;

356 
	`E_CLIENT_REVERSE_FOREACH
(
e_comp
, 
ec
)

358 ià(
	`e_objeù_is_d–
(
	`E_OBJECT
(
ec
))) ;

359 ià(
	`e_þ›Á_utž_ignÜed_g‘
(
ec
)) ;

360 ià(!
ec
->
äame
) ;

361 ià(!
	`evas_objeù_visibË_g‘
(
ec
->
äame
)) ;

363 ià(!
	`e_utž_¡rcmp
(
ec
->
icccm
.
t™Ë
, "QUICKPANEL"))

366  
ec
;

367 
	}
}

371 
	$_quick·Ãl_evas_cb_mou£_move
(*
d©a
, 
Evas
 *
evas
 
EINA_UNUSED
, 
Evas_Objeù
 *
obj
 EINA_UNUSED, *
ev’t
)

373 
E_Cl›Á
 *
ec
;

374 
Evas_Ev’t_Mou£_Move
 *
ev
 = 
ev’t
;

376 ià(!(
ec
 = 
d©a
)) ;

378 ià(
	`e_objeù_is_d–
(
	`E_OBJECT
(
ec
))) ;

379 ià(
	`e_þ›Á_utž_ignÜed_g‘
(
ec
)) ;

381 ià((!
_pÞ_quick·Ãl
è|| (!_pÞ_quick·Ãl->
þicked
)) ;

383 
	`e_mod_move_quick·Ãl_objeù_hªdËr_move
(
quick·Ãl
, 0, 
ev
->
cur
.
ÿnvas
.
y
);

384 
	}
}

387 
	$_quick·Ãl_evas_cb_mou£_down
(*
d©a
, 
Evas
 *
evas
 
EINA_UNUSED
, 
Evas_Objeù
 *
obj
 EINA_UNUSED, *
ev’t
)

389 
E_Cl›Á
 *
ec
 = 
d©a
;

390 
Evas_Ev’t_Mou£_Down
 *
ev
 = 
ev’t
;

391 
hx
, 
hy
, 
hw
, 
hh
;

394 ià((!
_pÞ_quick·Ãl
è|| (_pÞ_quick·Ãl->
þicked
)) ;

398 
hx
 = 
_pÞ_quick·Ãl
->
hªdËr_geo
.
x
;

399 
hy
 = 
_pÞ_quick·Ãl
->
hªdËr_geo
.
y
;

400 
hw
 = 
_pÞ_quick·Ãl
->
hªdËr_geo
.
w
;

401 
hh
 = 
_pÞ_quick·Ãl
->
hªdËr_geo
.
h
;

403 ià(!
	`E_INSIDE
(
ev
->
ÿnvas
.
x
 - 
ec
->
þ›Á
.x ,ƒv->ÿnvas.
y
 -ƒc->þ›Á.y, 
hx
, 
hy
, 
hw
, 
hh
)) ;

406 
_pÞ_quick·Ãl
->
þicked
 = 
EINA_TRUE
;

408 
quick·Ãl
 = 
	`e_mod_move_quick·Ãl_objeù_add
(
ec
);

410 
	`evas_objeù_move
(
quick·Ãl
, 0, 0);

411 
	`evas_objeù_»size
(
quick·Ãl
, 
ec
->
w
,ƒc->
h
);

412 
	`evas_objeù_show
(
quick·Ãl
);

413 
	`e_mod_move_quick·Ãl_objeù_hªdËr_move
(
quick·Ãl
, 0, 
ev
->
ÿnvas
.
y
 - 
ec
->y);

414 
	}
}

417 
	$_quick·Ãl_evas_cb_mou£_up
(*
d©a
, 
Evas
 *
evas
 
EINA_UNUSED
, 
Evas_Objeù
 *
obj
 EINA_UNUSED, *
ev’t
)

419 
E_Cl›Á
 *
ec
 = 
d©a
;

420 
Evas_Ev’t_Mou£_Up
 *
ev
 = 
ev’t
;

422 ià((!
_pÞ_quick·Ãl
è|| (!_pÞ_quick·Ãl->
þicked
)) ;

424 
_pÞ_quick·Ãl
->
þicked
 = 
EINA_FALSE
;

426 ià(
ev
->
ÿnvas
.
y
 > 
ec
->
zÚe
->
h
 / 2)

427 
	`evas_objeù_move
(
ec
->
äame
, 0, 0);

429 
	`evas_objeù_move
(
ec
->
äame
, -10000, -10000);

431 
	`evas_objeù_hide
(
quick·Ãl
);

432 
	`evas_objeù_d–
(
quick·Ãl
);

433 
quick·Ãl
 = 
NULL
;

434 
	}
}

437 
	$_quick·Ãl_þ›Á_evas_š™
(
E_Cl›Á
 *
ec
)

439 
PÞ_Quick·Ãl
 *
pÞ_qp
 = 
NULL
;

441 ià(
_pÞ_quick·Ãl
) ;

443 
pÞ_qp
 = 
	`E_NEW
(
PÞ_Quick·Ãl
, 1);

444 ià(!
pÞ_qp
) ;

446 
pÞ_qp
->
ec
 =ƒc;

447 
pÞ_qp
->
hªdËr_geo
.
x
 = 0;

448 
pÞ_qp
->
hªdËr_geo
.
w
 = 480;

449 
pÞ_qp
->
hªdËr_geo
.
h
 = 100;

450 
pÞ_qp
->
hªdËr_geo
.
y
 = 768 - 100;

453 
	`evas_objeù_ev’t_ÿÎback_add
(
ec
->
äame
, 
EVAS_CALLBACK_MOUSE_MOVE
,

454 
_quick·Ãl_evas_cb_mou£_move
, 
ec
);

455 
	`evas_objeù_ev’t_ÿÎback_add
(
ec
->
äame
, 
EVAS_CALLBACK_MOUSE_DOWN
,

456 
_quick·Ãl_evas_cb_mou£_down
, 
ec
);

457 
	`evas_objeù_ev’t_ÿÎback_add
(
ec
->
äame
, 
EVAS_CALLBACK_MOUSE_UP
,

458 
_quick·Ãl_evas_cb_mou£_up
, 
ec
);

460 
_pÞ_quick·Ãl
 = 
pÞ_qp
;

461 
	}
}

464 
Eša_BoÞ


465 
	$_quick·Ãl_cb_comp_objeù_add
(*
d©a
 
EINA_UNUSED
, 
ty³
 EINA_UNUSED, 
E_Ev’t_Comp_Objeù
 *
ev
)

467 
E_Cl›Á
 *
ec
;

470 ià(!(
ec
 = 
	`e_comp_objeù_þ›Á_g‘
(
ev
->
comp_objeù
)))

471  
ECORE_CALLBACK_RENEW
;

474 ià(
	`e_objeù_is_d–
(
	`E_OBJECT
(
ec
))è 
ECORE_CALLBACK_RENEW
;

477 ià(
	`e_pixm­_ty³_g‘
(
ec
->
pixm­
è!ð
E_PIXMAP_TYPE_WL
è 
ECORE_CALLBACK_RENEW
;

479 ià(
	`e_utž_¡rcmp
(
ec
->
icccm
.
t™Ë
, "QUICKPANEL"è!ð0è 
ECORE_CALLBACK_RENEW
;

482 ià(
_pÞ_quick·Ãl
è 
ECORE_CALLBACK_RENEW
;

484 
	`_quick·Ãl_þ›Á_evas_š™
(
ec
);

486  
ECORE_CALLBACK_RENEW
;

487 
	}
}

490 
	$_quick·Ãl_hook_þ›Á_d–
(*
d
 
EINA_UNUSED
, 
E_Cl›Á
 *
ec
)

492 ià(!
ec
) ;

493 ià(!
_pÞ_quick·Ãl
) ;

495 ià(
_pÞ_quick·Ãl
->
ec
 ==ƒc)

497 
	`E_FREE
(
_pÞ_quick·Ãl
);

498 
_pÞ_quick·Ãl
 = 
NULL
;

500 
	}
}

502 #undeà
E_CLIENT_HOOK_APPEND


503 
	#E_CLIENT_HOOK_APPEND
(
l
, 
t
, 
cb
, 
d
) \

506 
E_Cl›Á_Hook
 *
_h
; \

507 
_h
 = 
	`e_þ›Á_hook_add
(
t
, 
cb
, 
d
); \

508 
	`as£¹
(
_h
); \

509 
l
 = 
	`eša_li¡_­³nd
Ö, 
_h
); \

511 0)

	)

513 
EINTERN
 

514 
	$e_mod_qpmgr_quick·Ãl_š™
()

516 
	`E_LIST_HANDLER_APPEND
(
quick·Ãl_hªdËrs
, 
E_EVENT_COMP_OBJECT_ADD
,

517 
_quick·Ãl_cb_comp_objeù_add
, 
NULL
);

518 
	`E_CLIENT_HOOK_APPEND
(
quick·Ãl_hooks
, 
E_CLIENT_HOOK_DEL
,

519 
_quick·Ãl_hook_þ›Á_d–
, 
NULL
);

520 
	}
}

522 
EINTERN
 

523 
	$e_mod_qpmgr_quick·Ãl_shutdown
()

525 
	`E_FREE_LIST
(
quick·Ãl_hooks
, 
e_þ›Á_hook_d–
);

526 
	`E_FREE_LIST
(
quick·Ãl_hªdËrs
, 
ecÜe_ev’t_hªdËr_d–
);

527 
	}
}

	@
1
.
1
/usr/include
4
63
e_mod_indicator.c
e_mod_main.c
e_mod_main.h
e_mod_quickpanel.c
